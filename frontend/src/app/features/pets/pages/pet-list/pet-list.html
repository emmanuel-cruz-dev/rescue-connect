<section
  class="pt-24 bg-linear-to-b from-pink-50/90 to-white dark:bg-slate-900 dark:bg-linear-to-b dark:from-pink-950/30 dark:to-slate-900"
>
  <div class="container mx-auto px-4 max-w-7xl pb-16">
    <header class="mb-12">
      <p class="text-sm font-bold uppercase tracking-widest text-pink-600 mb-2">Cat치logo</p>
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white tracking-tight">
        Mascotas <span class="text-pink-600">disponibles</span>
      </h1>
      <p class="text-gray-600 dark:text-gray-400 mt-4 text-lg max-w-2xl">
        @if (pagination()) {
        {{ pagination()!.totalItems }} mascotas esperando un hogar } @else { Encontr치 tu compa침ero
        ideal }
      </p>
    </header>

    <div class="flex gap-4 items-start">
      <aside
        class="w-72 shrink-0 sticky top-24 hidden lg:block overflow-y-auto max-h-[calc(100vh-6rem)] pr-1"
      >
        <app-pet-filters
          [filters]="filters()"
          (filtersChange)="onFiltersChange($event)"
          (clearFilters)="clearFilters()"
        />
      </aside>

      <p-drawer
        [(visible)]="filtersDrawerVisible"
        header="Filtros"
        position="left"
        styleClass="w-80!"
      >
        <app-pet-filters
          [filters]="filters()"
          (filtersChange)="onFiltersChange($event)"
          (clearFilters)="clearFilters()"
        />
      </p-drawer>

      <div class="flex-1 min-w-0">
        <div class="flex items-center justify-between mb-5 gap-3 flex-wrap">
          <button
            class="lg:hidden flex items-center gap-2 px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm font-medium"
            (click)="filtersDrawerVisible = true"
          >
            <i class="pi pi-sliders-h"></i>
            Filtros @if (activeFiltersCount() > 0) {
            <span
              class="bg-pink-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center shadow-lg shadow-pink-200 dark:shadow-none"
            >
              {{ activeFiltersCount() }}
            </span>
            }
          </button>

          <div class="flex items-center gap-3 ml-auto">
            <span
              class="text-sm font-bold uppercase tracking-wider text-gray-800 dark:text-gray-300 hidden sm:inline"
              >Ordenar:</span
            >
            <p-select
              [options]="sortOptions"
              [(ngModel)]="selectedSort"
              optionLabel="label"
              optionValue="value"
              (onChange)="onSortChange($event.value)"
              class="text-sm border-slate-200! dark:border-slate-700!"
            />
          </div>
        </div>

        @if (loading()) {
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5">
          <app-pet-card-skeleton [count]="6" />
        </div>
        } @else if (pets().length === 0) {
        <div
          class="flex flex-col items-center justify-center py-32 text-center bg-white/30 dark:bg-slate-800/20 rounded-3xl border-2 border-dashed border-gray-200 dark:border-gray-800"
        >
          <div
            class="w-24 h-24 rounded-full bg-pink-50 dark:bg-pink-950/40 flex items-center justify-center mb-6"
          >
            <i class="pi pi-search text-4xl! text-pink-300 dark:text-pink-600"></i>
          </div>
          <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-3">
            No hay coincidencias
          </h3>
          <p class="text-gray-500 dark:text-gray-400 max-w-sm mb-8 text-lg">
            No encontramos mascotas con esos filtros. Prob치 con otras opciones.
          </p>
          <p-button
            label="Limpiar todos los filtros"
            icon="pi pi-refresh"
            (onClick)="clearFilters()"
            styleClass="text-white! bg-pink-600! border-none! px-6"
          />
        </div>
        } @else {
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5">
          @for (pet of pets(); track pet._id) {
          <app-pet-card [pet]="pet" [showAdoptButton]="false" />
          }
        </div>

        <p-paginator
          [rows]="filters().limit || 6"
          [totalRecords]="pagination()?.totalItems || 0"
          [first]="((filters().page || 1) - 1) * (filters().limit || 6)"
          (onPageChange)="onPageChange($event)"
          class="mt-8 bg-transparent! border-none"
        />
        }
      </div>
    </div>
  </div>
</section>
