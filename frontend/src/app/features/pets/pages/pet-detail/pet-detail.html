<section
  class="pt-24 bg-linear-to-b from-pink-50/90 to-white dark:bg-slate-900 dark:bg-linear-to-b dark:from-pink-950/30 dark:to-slate-900"
>
  <div class="container mx-auto px-4 max-w-6xl pb-16">
    <button
      (click)="goBack()"
      class="flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-pink-600 dark:hover:text-pink-400 transition-colors mb-8 group cursor-pointer"
    >
      <i class="pi pi-arrow-left group-hover:-translate-x-1 transition-transform"></i>
      Ir al cat√°logo
    </button>

    @if (loading()) {
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
      <div class="space-y-3">
        <p-skeleton height="26rem" borderRadius="16px" />
        <div class="flex gap-2">
          @for (i of [0,1,2]; track $index) {
          <p-skeleton height="5rem" width="5rem" borderRadius="10px" />
          }
        </div>
      </div>
      <div class="space-y-5">
        <p-skeleton width="60%" height="2.5rem" />
        <p-skeleton width="40%" height="1.25rem" />
        <p-skeleton width="100%" height="8rem" borderRadius="12px" />
        <p-skeleton width="100%" height="6rem" borderRadius="12px" />
        <p-skeleton width="100%" height="3rem" borderRadius="12px" />
      </div>
    </div>
    } @else if (pet()) {
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
      <div class="space-y-3 sticky top-24">
        <div class="relative">
          <app-pet-gallery
            [images]="galleryImages()"
            [fallbackImage]="getPlaceholderImage()"
            [imageHeight]="420"
          />
          <div>
            @if (pet()!.adopted) {
            <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
              <span
                class="bg-white text-gray-800 font-bold text-lg px-6 py-2 rounded-full shadow-lg rotate-[-8deg]"
              >
                ¬°Ya adoptado! üêæ
              </span>
            </div>
            }
          </div>
        </div>
      </div>

      <div class="space-y-6">
        <div>
          <p class="text-sm font-bold uppercase tracking-widest text-pink-600 mb-1">
            {{ pet()!.type === 'perro' ? 'Perro' : 'Gato' }}
          </p>
          <h1 class="text-4xl lg:text-5xl font-bold capitalize tracking-tight">
            {{ pet()!.name }}
          </h1>
          @if (pet()!.breed && pet()!.breed !== 'mestizo') {
          <p class="text-gray-500 dark:text-gray-400 mt-1 capitalize">{{ pet()!.breed }}</p>
          }
        </div>

        <div class="flex flex-wrap gap-2">
          <span
            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-pink-50 dark:bg-pink-950/40 text-pink-700 dark:text-pink-300 border border-pink-100 dark:border-pink-900"
          >
            <i class="pi pi-calendar text-xs"></i>
            {{ getAgeLabel() }}
          </span>
          <span
            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700"
          >
            <i class="pi pi-expand text-xs"></i>
            {{ getSizeLabel() }}
          </span>
          @if (pet()!.isVaccinated) {
          <span
            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-green-50 dark:bg-green-950/40 text-green-700 dark:text-green-300 border border-green-100 dark:border-green-900"
          >
            <i class="pi pi-shield text-xs"></i>
            Vacunado
          </span>
          } @if (pet()!.isSterilized) {
          <span
            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-blue-50 dark:bg-blue-950/40 text-blue-700 dark:text-blue-300 border border-blue-100 dark:border-blue-900"
          >
            <i class="pi pi-check-circle text-xs"></i>
            Esterilizado
          </span>
          }
        </div>

        @if (pet()!.description) {
        <div
          class="bg-white dark:bg-slate-800/60 rounded-2xl border border-gray-100 dark:border-gray-700 p-5"
        >
          <h2
            class="text-sm font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500 mb-3"
          >
            Sobre {{ pet()!.name }}
          </h2>
          <p class="text-gray-700 dark:text-gray-300 leading-relaxed first-letter:uppercase">
            {{ pet()!.description }}
          </p>
        </div>
        }

        <div
          class="bg-white dark:bg-slate-800/60 rounded-2xl border border-gray-100 dark:border-gray-700 p-5"
        >
          <h2
            class="text-sm font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500 mb-4"
          >
            Ficha
          </h2>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <p class="text-xs text-gray-400 dark:text-gray-500 mb-0.5">G√©nero</p>
              <p class="font-medium text-gray-800 dark:text-gray-200 capitalize">
                {{ pet()!.gender }}
              </p>
            </div>
            <div>
              <p class="text-xs text-gray-400 dark:text-gray-500 mb-0.5">Tama√±o</p>
              <p class="font-medium text-gray-800 dark:text-gray-200">{{ getSizeLabel() }}</p>
            </div>
            <div>
              <p class="text-xs text-gray-400 dark:text-gray-500 mb-0.5">Raza</p>
              <p class="font-medium text-gray-800 dark:text-gray-200 capitalize">
                {{ pet()!.breed || 'Mestizo' }}
              </p>
            </div>
            <div>
              <p class="text-xs text-gray-400 dark:text-gray-500 mb-0.5">Especie</p>
              <p class="font-medium text-gray-800 dark:text-gray-200">
                {{ pet()!.type === 'perro' ? 'Perro' : 'Gato' }}
              </p>
            </div>
          </div>
        </div>

        @if (!pet()!.adopted) {
        <p-button
          styleClass="w-full bg-pink-600! hover:bg-pink-700! border-0! text-white! py-3! text-base! font-semibold! rounded-xl!"
        >
          <ng-template pTemplate="content">
            <lucide-angular [img]="PawPrintIcon" size="20" />
            <span class="ml-2">Quiero adoptar a {{ pet()!.name }}</span>
          </ng-template>
        </p-button>
        } @else {
        <div
          class="w-full text-center py-3 px-4 rounded-xl bg-gray-100 dark:bg-slate-800 text-gray-500 dark:text-gray-400 font-medium border border-gray-200 dark:border-gray-700"
        >
          Este compa√±ero ya encontr√≥ su hogar
        </div>
        }
      </div>
    </div>
    } @else {
    <div class="flex flex-col items-center justify-center py-32 text-center">
      <div
        class="w-24 h-24 rounded-full bg-pink-50 dark:bg-pink-950/40 flex items-center justify-center mb-6"
      >
        <i class="pi pi-search text-4xl! text-pink-300 dark:text-pink-600"></i>
      </div>
      <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-3">Mascota no encontrada</h2>
      <p class="text-gray-500 dark:text-gray-400 mb-8">
        No pudimos encontrar la mascota que busc√°s.
      </p>
      <p-button
        label="Volver al cat√°logo"
        icon="pi pi-arrow-left"
        (onClick)="goBack()"
        styleClass="bg-pink-600! border-none! text-white! px-6"
      />
    </div>
    }
  </div>
</section>
