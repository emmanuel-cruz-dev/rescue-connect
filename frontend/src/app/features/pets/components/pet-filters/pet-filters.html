<article
  class="bg-white dark:bg-slate-900! rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm flex flex-col h-full max-h-[calc(100vh-120px)] overflow-hidden"
>
  <div
    class="flex-none flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-slate-800/50"
  >
    <div class="flex items-center gap-2">
      <i class="pi pi-filter-fill text-pink-600 dark:text-pink-400"></i>
      <span class="font-bold text-gray-800 dark:text-white text-sm uppercase tracking-tight"
        >Filtros</span
      >
      @if (activeCount() > 0) {
      <p-badge [value]="activeCount()" severity="danger" class="bg-pink-600!"></p-badge>
      }
    </div>
    @if (activeCount() > 0) {
    <p-button
      label="Limpiar"
      (onClick)="onClearFilters()"
      variant="text"
      styleClass="p-0 text-pink-600! hover:text-pink-700! font-bold text-sm hover:bg-transparent"
    />
    }
  </div>

  <div class="pet-filters__content flex-1 overflow-y-auto px-6 py-5 space-y-6">
    <div>
      <label
        class="flex items-center gap-2 text-[11px] font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 mb-2"
      >
        <span>Buscador</span>
        <i class="pi pi-search text-gray-400 text-sm"></i>
      </label>
      <span class="p-input-icon-left w-full">
        <input
          pInputText
          type="text"
          placeholder="Nombre, raza, descripción..."
          [value]="searchValue()"
          (input)="onSearch($any($event.target).value)"
          class="w-full border-gray-200! dark:border-gray-700! dark:bg-slate-800! rounded-xl!"
        />
      </span>
    </div>

    <hr class="border-gray-100 dark:border-gray-800" />

    <div>
      <label
        class="block text-[11px] font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 mb-2"
        >Categoría</label
      >
      <div class="flex flex-wrap gap-2">
        @for (type of petTypes; track type.value) {
        <button
          (click)="onTypeChange(selectedType() === type.value ? undefined : type.value)"
          class="flex items-center gap-2 px-4 py-2 text-sm rounded-full transition-all cursor-pointer"
          [ngClass]="
            selectedType() === type.value
              ? 'font-bold bg-sky-600 text-white shadow-md shadow-sky-200 dark:shadow-none'
              : 'font-semibold bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700'
          "
        >
          <lucide-angular [img]="type.icon" size="14" />
          {{ type.label }}
        </button>
        }
      </div>
    </div>

    <div>
      <label
        class="block text-[11px] font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 mb-2"
        >Género</label
      >
      <div class="flex flex-wrap gap-2">
        @for (gender of genderOptions; track gender.value) {
        <button
          (click)="onGenderChange(selectedGender() === gender.value ? undefined : gender.value)"
          class="flex items-center gap-2 px-4 py-2 text-sm rounded-full transition-all cursor-pointer"
          [ngClass]="
            selectedGender() === gender.value
              ? 'font-bold bg-sky-600 text-white shadow-md shadow-sky-200 dark:shadow-none'
              : 'font-semibold bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-700'
          "
        >
          <i [class]="gender.value === 'macho' ? 'pi pi-mars' : 'pi pi-venus'" class="text-sm"></i>
          {{ gender.label }}
        </button>
        }
      </div>
    </div>

    <div>
      <label
        class="block text-[11px] font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 mb-2"
        >Tamaño</label
      >
      <div class="grid grid-cols-2 gap-2">
        @for (size of sizeOptions; track size.value) {
        <button
          (click)="onSizeChange(selectedSize() === size.value ? undefined : size.value)"
          class="py-2 rounded-lg text-[11px] font-bold border-2 cursor-pointer transition-all"
          [ngClass]="
            selectedSize() === size.value
              ? 'border-pink-500 bg-pink-50 dark:bg-pink-950/20 text-pink-600 dark:text-pink-400'
              : 'border-transparent bg-gray-50 dark:bg-slate-800 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700'
          "
        >
          {{ size.label }}
        </button>
        }
      </div>
    </div>

    <div>
      <label
        class="block text-[11px] font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 mb-2"
        >Edad (Años)</label
      >
      <div class="flex items-center gap-3">
        <input
          pInputText
          type="number"
          placeholder="Min"
          class="w-full text-center border-gray-200! dark:border-gray-700! dark:bg-slate-800!"
          [value]="minAge() ?? ''"
          (change)="onMinAgeChange($any($event.target).value)"
        />
        <span class="text-gray-300">-</span>
        <input
          pInputText
          type="number"
          placeholder="Max"
          class="w-full text-center border-gray-200! dark:border-gray-700! dark:bg-slate-800!"
          [value]="maxAge() ?? ''"
          (change)="onMaxAgeChange($any($event.target).value)"
        />
      </div>
    </div>

    <div class="space-y-3 pt-2">
      <div class="flex items-center gap-3">
        <p-checkbox
          [binary]="true"
          [ngModel]="isSterilized()"
          (onChange)="onSterilizedChange($event.checked)"
          inputId="sterilized"
        />
        <label
          for="sterilized"
          class="text-sm font-medium text-gray-600 dark:text-gray-300 cursor-pointer"
          >Esterilizado/a</label
        >
      </div>
      <div class="flex items-center gap-3">
        <p-checkbox
          [binary]="true"
          [ngModel]="isVaccinated()"
          (onChange)="onVaccinatedChange($event.checked)"
          inputId="vaccinated"
        />
        <label
          for="vaccinated"
          class="text-sm font-medium text-gray-600 dark:text-gray-300 cursor-pointer"
          >Vacunado/a</label
        >
      </div>
    </div>
    @if (activeCount() > 0) {
    <button
      (click)="onClearFilters()"
      class="w-full mt-2 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400 text-sm font-medium hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-pink-500 dark:hover:text-pink-600 transition-all cursor-pointer"
    >
      Limpiar todos los filtros
    </button>
    }
  </div>
</article>
